!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e){var o=angular.module("locationsApp",["core","ngRoute"]),n="http://127.0.0.1:8000/";o.config(["$routeProvider",function(t){t.when("/all",{controller:"MainController",templateUrl:"/views/main.html",reloadOnSearch:!1}).when("/location/:id",{controller:"LocationController",templateUrl:"/views/location.html"}).when("/add",{controller:"AddController",templateUrl:"/views/add.html"}).when("/update/:id",{controller:"UpdateController",templateUrl:"/views/update.html"}).otherwise({redirectTo:"/all"})}]),o.directive("fileModel",["$parse",function(t){return{restrict:"A",link:function(e,o,n){var r=t(n.fileModel).assign;o.bind("change",(function(){e.$apply((function(){r(e,o[0].files[0])}))}))}}}]),o.component("navigation",{templateUrl:"/views/navigation.html",controller:["$location",function(t){this.getClass=function(e){return t.path().substr(0,e.length)===e?"active":""}}]}),o.controller("MainController",["$scope","$http","$location",function(t,e,o){console.log("Zapínam MainController"),t.root=n,t.myFilter={title:o.search().filtr},t.sortBy="id",t.reverse=!0,t.changeUrl=function(t){o.search("filtr",t)},t.sort=function(e){t.sortBy=e,t.reverse=!t.reverse},e.get(n+"api/locations").then((function(e){console.log("Načítám lokace"),t.locations=e.data;new Date(t.locations.date);t.locations.date=new Date(t.locations.date)}))}]),o.controller("LocationController",["$scope","$http","$routeParams","$location",function(t,e,o,r){t.root=n;var a=o.id;e.get(n+"api/location/"+a).then((function(e){t.location=e.data})),t.delete=function(t){e.delete(n+"api/location/"+t).then((function(){console.log("Lokace "+t+"smazána"),r.path("all")}))}}]),o.controller("AddController",["$scope","$http","$location","$httpParamSerializerJQLike",function(t,e,o,r){console.log("Add Controller"),t.gps="0N 0E",window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition((function(e){t.$apply((function(){t.gps=e.coords.latitude.toString().slice(0,10)+"N "+e.coords.longitude.toString().slice(0,10)+"E"}))})):console.log("Geolocation is not supported by this browser."),t.save=function(){if(t.title&&t.content&&t.gps&&t.myFile){var a=t.myFile,l=new FormData;l.append("file",a),e.post("http://127.0.0.1:8000/api/savedata",l,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then((function(a){console.log("Image upload done:",a.data);var l={title:t.title,content:t.content,user:"root",gps:t.gps,tags:t.tags,images:a.data};e({method:"POST",url:n+"api/location",data:r(l),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((function(t){console.log("Create response:",t.toString()),o.path("all")}))})).catch((function(t){console.log("Upload err :-(",t)}))}}}]),o.controller("UpdateController",["$scope","$http","$routeParams","$httpParamSerializerJQLike","$location",function(t,e,o,r,a){var l=o.id;e.get(n+"api/location/"+l).then((function(e){var o=e.data;t.title=o.title,t.content=o.content,t.gps=o.gps,t.tags=o.tags,t.images=o.images})),t.update=function(){var i={title:t.title,content:t.content,user:"root",gps:t.gps,tags:t.tags,images:t.images};e({method:"PUT",url:n+"api/location/"+o.id,data:r(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((function(t){console.log("Update response: "+t.toString()),a.path("location/"+l)}))}}])}]);
//# sourceMappingURL=app.js.map